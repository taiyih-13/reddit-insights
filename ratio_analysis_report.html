<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reddit Upvote-to-Comment Ratio Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
        }
        .header {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3b82f6;
        }
        .stat-label {
            color: #6b7280;
            font-size: 0.9em;
        }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .chart-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #1f2937;
        }
        .insights {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .insight-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #f3f4f6;
            border-radius: 6px;
        }
        .key-finding {
            background: #dcfce7;
            border-left: 4px solid #16a34a;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        canvas {
            max-height: 400px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ“Š Reddit Upvote-to-Comment Ratio Analysis</h1>
        <p>Analysis of 83 posts from finance subreddits</p>
    </div>

    <div class="summary">
        <div class="stat-card">
            <div class="stat-number">5.2</div>
            <div class="stat-label">Average Upvotes per Comment</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">1.9</div>
            <div class="stat-label">Median Ratio</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">83</div>
            <div class="stat-label">Posts Analyzed</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">50.6%</div>
            <div class="stat-label">High Engagement Posts</div>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-title">Engagement Distribution</div>
        <canvas id="engagementPie"></canvas>
    </div>

    <div class="chart-container">
        <div class="chart-title">Ratio Distribution (Log Scale)</div>
        <canvas id="ratioHistogram"></canvas>
    </div>

    <div class="chart-container">
        <div class="chart-title">Average Ratio by Subreddit</div>
        <canvas id="subredditBar"></canvas>
    </div>

    <div class="chart-container">
        <div class="chart-title">Upvotes vs Comments Correlation</div>
        <canvas id="scatterPlot"></canvas>
    </div>

    <div class="insights">
        <h2>Key Findings</h2>
        
        <div class="key-finding">
            <strong>ðŸ’¡ Comments are undervalued in current weighting (0.7/0.3)</strong><br>
            With a natural 5:1 ratio, comments should have higher weight in scoring formula
        </div>

        <div class="insight-item">
            <strong>ðŸ“ˆ Half of posts are highly engaging</strong><br>
            50.6% of posts have fewer than 2 upvotes per comment, showing active discussion
        </div>

        <div class="insight-item">
            <strong>ðŸŽ¯ Discussion subreddits outperform</strong><br>
            r/financialindependence and r/investing have the most balanced engagement
        </div>

        <div class="insight-item">
            <strong>ðŸš€ Crypto content is polarized</strong><br>
            Either gets tons of discussion or just viral upvotes with no engagement
        </div>

        <div class="insight-item">
            <strong>ðŸ”— Moderate correlation (0.563)</strong><br>
            Upvotes and comments are related but many posts break the pattern
        </div>

        <h3>Suggested Formula Improvements</h3>
        <div class="insight-item">
            <strong>Current:</strong> (upvotes Ã— 0.7) + (comments Ã— 0.3)<br>
            <strong>Better:</strong> (upvotes Ã— 0.5) + (comments Ã— 2.5)<br>
            <em>This reflects the natural 5:1 ratio and values discussion more appropriately</em>
        </div>
    </div>

    <script>
        // Engagement Distribution Pie Chart
        const engagementCtx = document.getElementById('engagementPie').getContext('2d');
        new Chart(engagementCtx, {
            type: 'pie',
            data: {
                labels: ['High Engagement (<2:1)', 'Medium Engagement (2-10:1)', 'Low Engagement (>10:1)'],
                datasets: [{
                    data: [50.6, 33.7, 15.7],
                    backgroundColor: ['#16a34a', '#eab308', '#dc2626'],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Ratio Histogram
        const histogramCtx = document.getElementById('ratioHistogram').getContext('2d');
        new Chart(histogramCtx, {
            type: 'bar',
            data: {
                labels: ['0-1', '1-2', '2-5', '5-10', '10-20', '20+'],
                datasets: [{
                    label: 'Number of Posts',
                    data: [23, 19, 20, 8, 8, 5],
                    backgroundColor: '#3b82f6',
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Posts'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Upvotes per Comment Ratio'
                        }
                    }
                }
            }
        });

        // Subreddit Bar Chart
        const subredditCtx = document.getElementById('subredditBar').getContext('2d');
        new Chart(subredditCtx, {
            type: 'bar',
            data: {
                labels: ['CryptoMarkets', 'financialindependence', 'ValueInvesting', 'investing', 'pennystocks', 'forex', 'daytrading', 'stocks', 'cryptocurrency', 'Bitcoin'],
                datasets: [{
                    label: 'Average Ratio',
                    data: [1.0, 1.5, 2.1, 2.8, 3.9, 5.1, 5.1, 6.2, 8.9, 16.9],
                    backgroundColor: '#8b5cf6',
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Average Upvotes per Comment'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        // Scatter Plot
        const scatterCtx = document.getElementById('scatterPlot').getContext('2d');
        new Chart(scatterCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Posts',
                    data: [
                        {x: 195, y: 102}, {x: 153, y: 256}, {x: 21, y: 7}, {x: 303, y: 60},
                        {x: 109, y: 112}, {x: 41, y: 133}, {x: 87, y: 14}, {x: 141, y: 10},
                        {x: 1197, y: 113}, {x: 65, y: 1696}, {x: 2363, y: 43}, {x: 156, y: 29},
                        {x: 89, y: 8}, {x: 348, y: 42}, {x: 178, y: 20}, {x: 67, y: 6},
                        {x: 45, y: 31}, {x: 234, y: 45}, {x: 89, y: 12}, {x: 567, y: 78}
                    ],
                    backgroundColor: '#f59e0b',
                    borderColor: '#d97706',
                    pointRadius: 4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Upvotes'
                        },
                        type: 'logarithmic'
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Comments'
                        },
                        type: 'logarithmic'
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    </script>
</body>
</html>